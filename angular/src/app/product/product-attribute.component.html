<form [formGroup]="form" skipValidation (ngSubmit)="saveChange()">
    <div class="grid">
        <div class="col-3">
            <div class="field">
                <p-dropdown [options]="attributes" placeholder="Chọn thuộc tính" 
                [style]="{ width:'100%' }" [showClear]="true" formControlName="attributeId"
                (onChange)="selectAttribute($event)"
                ></p-dropdown>
            </div>
        </div>

        <div class="col-3">
            <div class="field">
                <p-calendar formControlName="dateTimeValue" [hidden]="!showDateTimeControl"></p-calendar>
                <p-inputNumber formControlName="decimalValue" mode="decimal" [hidden]="!showDecimalControl"></p-inputNumber>
                <p-inputNumber formControlName="intValue" [hidden]="!showIntControl"></p-inputNumber>
                <input pInputText type="text" formControlName="varcharValue" [hidden]="!showVarcharControl" class="w-full"/>
                <input pInputText type="text" formControlName="textValue" [hidden]="!showTextControl" class="w-full"/>
            </div>
        </div>

        <div class="col-3">
            <button pButton type="button" (click)="saveChange()" [disabled]="!form.valid || btnDisabled" label="Thêm"></button>
        </div>
    </div>
</form>
<!--Table-->
<p-table #pnl [value]="productAttributes" dataKey="id">
    <ng-template pTemplate="header">
        <tr>
            <th>Mã</th>
            <th style="width: 20%;">Tên thuộc tính</th>
            <th style="width: 20%;">Kiểu dữ liệu</th>
            <th>Giá trị</th>
            <th></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-row>
        <tr>
            <td>{{ row.code }}</td>
            <td>{{ row.label }}</td>
            <td>{{ loadDataTypeName(row.dataType) }}</td>
            <td>{{ getValueByType(row, row.dataType) }}</td>
            <td>
                <button pButton pRipple type="button" class="p-button-text p-button-danger" (click)="removeItem(row)" icon="pi pi-times"></button>
            </td>
        </tr>
    </ng-template>
</p-table>
<!--BlockUI-->
<p-blockUI [blocked]="blockedPanel">
    <p-progressSpinner [style]="{width: '50px', height: '50px'}" styleClass="custom-spinner" strokeWidth="8" fill="var(--surface-ground)" animationDuration=".5s"></p-progressSpinner>
</p-blockUI>
