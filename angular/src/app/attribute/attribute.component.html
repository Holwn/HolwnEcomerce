<p-panel header="Danh sách thuộc tính">
    <!--Filter (search panel)-->
    <div class="grid">
        <div class="col-4">
            <button pButton type="button" (click)="showAddModal()" icon="pi pi-plus" iconPos="left" label="Thêm"></button>
            <button pButton type="button" (click)="showEditModal()" class="ml-1 p-button-help" *ngIf="selectedItems.length == 1" icon="pi pi-minus" iconPos="left" label="Sửa"></button>
            <button pButton type="button" (click)="deleteItems()" class="ml-1 p-button-danger" *ngIf="selectedItems.length > 0" icon="pi pi-minus" iconPos="left" label="Xóa"></button>
        </div>
        <div class="col-8">
            <div class="formgroup-inline">
                <div class="field">
                    <label for="txt-keyword" class="p-sr-only">Từ khóa</label>
                    <input id="txt-keyword" (keypress)="loadData()" [(ngModel)]="keyword" pInputText type="text" placeholder="Gõ từ khóa">
                </div>
                <button type="button" pButton icon="pi pi-search" iconPos="left" label="Tìm" (click)="loadData()"></button>
            </div>
        </div>
    </div>
    <!--Table-->
    <p-table #pnl [value]="items" [(selection)]="selectedItems" selectionMode="multiple">
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 10px;">
                    <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                </th>
                <th>Mã</th>
                <th>Kiểu dữ liệu</th>
                <th>Nhãn</th>
                <th>Thứ tự</th>
                <th>Hiện thị</th>
                <th>Bắt buộc nhập</th>
                <th>Duy nhất</th>
                <th>Kích hoạt</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-row>
            <tr [pSelectableRow]="row">
                <td style="width: 10px;"><span class="ui-column-title"></span>
                    <p-tableCheckbox [value]="row"></p-tableCheckbox>
                </td>
                <td>{{ row.code }}</td>
                <td>{{ getAttributeTypeName(row.dataType) }}</td>
                <td>{{ row.label }}</td>
                <td>{{ row.sortOrder }}</td>
                <td>
                    <p-badge *ngIf="row.visibility" severity="success" value="Hiện thị"></p-badge>
                    <p-badge *ngIf="!row.visibility" severity="danger" value="Ẩn"></p-badge>
                </td>
                <td>
                    <p-badge *ngIf="row.isRequired" severity="success" value="Có"></p-badge>
                    <p-badge *ngIf="!row.isRequired" severity="danger" value="Không"></p-badge>
                </td>
                <td>
                    <p-badge *ngIf="row.isUnique" severity="success" value="Có"></p-badge>
                    <p-badge *ngIf="!row.isUnique" severity="danger" value="Không"></p-badge>
                </td>
                <td>
                    <p-badge *ngIf="row.isActive" severity="success" value="Kích hoạt"></p-badge>
                    <p-badge *ngIf="!row.isActive" severity="danger" value="khóa"></p-badge>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary">
            <div style="text-align: left">Tổng số bản ghi: {{ totalCount | number}}</div>
        </ng-template>
    </p-table>
    <!--Paginator-->
    <p-paginator [rows]="maxResultCount" [totalRecords]="totalCount" (onPageChange)="pageChanged($event)" [rowsPerPageOptions]="[10,20,30,50,100]"></p-paginator>
    <!--BlockUI-->
    <p-blockUI [blocked]="blockedPanel" [target]="pnl">
        <p-progressSpinner [style]="{width: '50px', height: '50px'}" styleClass="custom-spinner" strokeWidth="8" fill="var(--surface-ground)" animationDuration=".25s"></p-progressSpinner>
    </p-blockUI>
</p-panel>